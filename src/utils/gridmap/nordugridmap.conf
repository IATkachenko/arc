## The nordugridmap utility processes the arc.conf central config file.
## The --config command line option can be used to specify a 
## different configuration file.
## Below the relevant section of the arc.conf is shown.
## Nordugridmap reads the [vo] blocks and generates a 'gridmap' file 
## for each block.


####################################################################
# [vo] block is used to define VOs and generate mapfiles from user 
# list maintained by VO databases. VO block is a configuration block
# for the nordugridmap utility.
# [vo] blocks can also be used and referenced in authorization blocks

[vo]

# id  blockid - specifies the unique block id
id="vo_1"

# vo vo_name - specifies the VO name, this name can be used in other blocks
# and in gacl expressions. MUST be given.
vo="atlas"

# file path - the file which contains the user lists associated with this
# VO. The file can be automatically GENERATED using the nordugridmap utility,
# see the 'url' attribute below.
file="/etc/grid-security/VOs/atlas-users"

# source url - the URL of the VO database which is assigned to this VO. The
# nordugridmap will use this URL to automaticaly generate and keep up-to-date 
# the userlist (mapfile) specified by the 'file' attribute. url is a 
# multivalued attribute, several sources can be specified for a [vo] block
# and all the users from those sources will be merged into the same file.
# The source URLs are processed in the given order.
# Currently supported URL types are: http(s)://, ldap://, file:// 
# vomss://, voms:// and the special string "nordugrid". 
# "file://" can be used to specify a local manually edited grid-mapfile,
# while "nordugrid" will add the NorduGrid VO members.
source="vomss://lcg-voms.cern.ch:8443/voms/atlas?/atlas/Role=VO-Admin"
source="vomss://kuiken.nikhef.nl:8443/voms/gin.ggf.org"
source="http://www.nordugrid.org/developers.dn"
source="ldap://grid-vo.nikhef.nl/ou=lcg1,o=atlas,dc=eu-datagrid,dc=org"
source="file:///etc/grid-security/priviliged_users.dn"
source="nordugrid"

# mapped_unixid unixid - The local UNIXID which is used in the generated 
# grid-mapfile by the nordugridmap utility. 
# Don't specify it (or leave it empty) in case you only need 
# a generated  user list without mapping information. A vo block can only have
# one unixID, all the users from all the sources are mapped to the same UID.
mapped_unixid="gridtest"

# require_issuerdn yes/no - another nordugridmap option. YES would map only
# those DNs obtained from the urls which have the corresponding public CA 
# packages installed. Default is 'no'.
require_issuerdn="no"

# x509_cert_dir path - The directory containing the CA certificates. This
# information is needed by the 'require_issuerdn' option. 
x509_cert_dir="/etc/grid-security/certificates"

# filter  ACL string - An ACL filter for the nordugridmap utility. Multiple
# allow/deny statements are possible. The fetched DNs are filtered against
# the specified rules before they are added to the generated mapfile. 
# * can be used as a wildcard. You may run the nordugridmap with the --test
# command line option to see how the filters you specified work.
filter="deny  *infn*"
filter="allow *NorduGrid*"


# another example VO block
[vo]
id="vo_2"
vo="NorduGrid_Community"
file="/etc/grid-security/VOs/community.dn"
source="http://www.nordugrid.org/community.dn"
source="nordugrid"
source="file:///etc/grid-security/priviliged_users.dn"
mapped_unixid="communityuser"
require_issuerdn="no"
filter="deny  /O=Grid/O=NorduGrid/OU=bad.site/CN=Bad User"
#filter="allow *lu.se*"


