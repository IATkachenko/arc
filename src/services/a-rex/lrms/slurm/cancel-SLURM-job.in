#!/bin/bash
# set -x
# 
#  Cancel job running in SLURM.
#  Input: grami file (same as Globus)

echo "----- starting cancel_slurm_job -----" 1>&2

joboption_lrms=SLURM

basedir=`dirname $0`
basedir=`cd $basedir > /dev/null && pwd` || exit $?

pkglibdir="$basedir/@pkglibdir_rel_to_pkglibexecdir@"
pkglibdir=`cd $pkglibdir > /dev/null && pwd` || exit $?

. ${pkglibdir}/cancel_common.sh $1 || exit $?

verify_jobid $joboption_jobid || exit 1
    
echo "executing scancel with job id $joboption_jobid" 1>&2
"${scancel}" "${joboption_jobid}"
if [ "$?" != "0" ];then
    echo "scancel failed" 1>&2
fi

echo "----- exiting cancel_slurm_job -----" 1>&2
exit 0
