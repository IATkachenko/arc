<?xml version="1.0"?>
<ArcConfig
  xmlns="http://www.nordugrid.org/schemas/ArcConfig/2007"
  xmlns:tcp="http://www.nordugrid.org/schemas/ArcMCCTCP/2007"
  xmlns:arex="http://www.nordugrid.org/schemas/a-rex/Config"
  xmlns:echo="urn:echo_config"
>
  <Server>
    <Foreground/>
    <Pidfile>./arcserver.pid</Pidfile>
    <Logger level="VERBOSE">./logfile</Logger>
  </Server>
  <ModuleManager>
    <Path>/usr/local/lib/arc/</Path>
  </ModuleManager>
  <Plugins><Name>mcctcp</Name></Plugins>
  <Plugins><Name>mcctls</Name></Plugins>
  <Plugins><Name>mcchttp</Name></Plugins>
  <Plugins><Name>mccsoap</Name></Plugins>
  <Plugins><Name>arex</Name></Plugins>
  <Plugins><Name>echo</Name></Plugins>
  <Chain>
    <Component name="tcp.service" id="tcp">
      <next id="tls"/>
      <tcp:Listen><tcp:Port>60000</tcp:Port></tcp:Listen>
    </Component>
    <Component name="tls.service" id="tls">
      <next id="http"/>
<!--
      <KeyPath>/etc/grid-security/hostkey.pem</KeyPath>
    
  <CertificatePath>/etc/grid-security/hostcert.pem</CertificatePath>
    
  <CACertificatePath>/etc/grid-security/certificates/1f0e8352.0</CACertificatePath>
-->
      <KeyPath>./key.pem</KeyPath>
      <CertificatePath>./cert.pem</CertificatePath>
      <CACertificatePath>./ca.pem</CACertificatePath>

    </Component>
    <Component name="http.service" id="http">
      <next id="soap">POST</next>
    </Component>
    <Component name="soap.service" id="soap">
      <next id="plexer"/>
    </Component>
    <Plexer name="plexer.service" id="plexer">
      <next id="a-rex">/arex</next>
      <next id="echo">/echo</next>
    </Plexer>
    <Service name="a-rex" id="a-rex">
      <arex:endpoint>http://lscf.nbi.dk:60000/arex</arex:endpoint>
      <arex:username>sanjak</arex:username>
      <arex:gmconfig>/etc/arc.conf</arex:gmconfig>
    </Service>
    <Service name="echo" id="echo">
      <echo:prefix>[ </echo:prefix>
      <echo:suffix> ]</echo:suffix>
    </Service>
  </Chain>
</ArcConfig>

