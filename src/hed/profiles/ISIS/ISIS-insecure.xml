<ArcConfig xmlns="http://www.nordugrid.org/schemas/arcconfig/2009/08" xmlns:loader="http://www.nordugrid.org/schemas/loader/2009/08" xmlns:tcp="http://www.nordugrid.org/schemas/tcp/2009/08" xmlns:infosys="http://www.nordugrid.org/schemas/InfoRegisterConfig/2008" xmlns:isis="http://www.nordugrid.org/schemas/isis/2009/08">
    <Server>
        <PidFile inisections="common" initag="pidfile">/var/log/arched.pid</PidFile>
        <Logger>
            <File inisections="common" initag="logfile">/var/log/arc/arched.log</File>
            <Level inisections="common" initag="loglevel">DEBUG</Level>
            <Maxsize inisections="common" initag="logmaxsize">10000000</Maxsize>
            <Backups inisections="common" initag="logbackups">10</Backups>
        </Logger>
    </Server>
    <loader:ModuleManager>
        <loader:Path inisections="common" initag="libpath">${exec_prefix}/lib/arc</loader:Path>
    </loader:ModuleManager>
    <loader:Plugins>
        <loader:Name>mcctcp</loader:Name>
        <loader:Name>mcctls</loader:Name>
        <loader:Name>mcchttp</loader:Name>
        <loader:Name>mccsoap</loader:Name>
        <loader:Name>arcshc</loader:Name>
        <loader:Name>isis</loader:Name>
    </loader:Plugins>
    <loader:Chain>
        <loader:Component name="tcp.service" id="tcp">
            <loader:next id="http"/>
            <tcp:Listen>
                <tcp:Interface inisections="common" initag="interface">0.0.0.0</tcp:Interface>
                <tcp:Port inisections="common" initag="port"></tcp:Port>
                <tcp:Version inisections="common" initag="ipversion">4</tcp:Version>
            </tcp:Listen>
        </loader:Component>
        <loader:Component name="http.service" id="http">
            <loader:next id="soap">POST</loader:next>
        </loader:Component>
        <loader:Component name="soap.service" id="soap">
            <loader:next id="plexer"/>
        </loader:Component>
        <loader:Plexer name="plexer.service" id="plexer">
            <loader:next id="isis" inisections="isis" initag="urlpattern">^/isis$</loader:next>            
        </loader:Plexer>
        <loader:Service name="isis" id="isis">
            <isis:endpoint inisections="isis" initag="endpoint"/>
            <isis:DBPath inisections="isis" initag="dbpath">/var/spool/arc/isis_data</isis:DBPath>
            <isis:InfoProvider>
                <isis:URL inisections="isis" initag="peerurl1"/>
            </isis:InfoProvider>
            <isis:InfoProvider>
                <isis:URL inisections="isis" initag="peerurl2"/>
            </isis:InfoProvider>
            <isis:InfoProvider>
                <isis:URL inisections="isis" initag="peerurl3"/>
            </isis:InfoProvider>
            <isis:KeyPath inisections="isis common" initag="client_key"/>
            <isis:CertificatePath inisections="isis common" initag="client_cert"/>
            <isis:CACertificatesDir inisections="isis common" initag="ca_dir"/>
            <infosys:InfoRegister>
                <infosys:Endpoint inisections="isis" initag="endpoint"/>
                <infosys:Period inisections="isis register" initag="period">PT30S</infosys:Period>
                <infosys:Expiration inisections="isis register" initag="expiration">PT1M</infosys:Expiration>
                <infosys:Registrar>
                    <infosys:URL inisections="isis register" initag="index_server1"/>
                    <infosys:KeyPath inisections="isis common" initag="client_key"/>
                    <infosys:CertificatePath inisections="isis common" initag="client_cert"/>
                    <infosys:CACertificatesDir inisections="isis common" initag="ca_dir"/>
                </infosys:Registrar>
                <infosys:Registrar>
                    <infosys:URL inisections="isis register" initag="index_server2"/>
                    <infosys:KeyPath inisections="isis common" initag="client_key"/>
                    <infosys:CertificatePath inisections="isis common" initag="client_cert"/>
                    <infosys:CACertificatesDir inisections="isis common" initag="ca_dir"/>
                </infosys:Registrar>
                <infosys:Registrar>
                    <infosys:URL inisections="isis register" initag="index_server3"/>
                    <infosys:KeyPath inisections="isis common" initag="client_key"/>
                    <infosys:CertificatePath inisections="isis common" initag="client_cert"/>
                    <infosys:CACertificatesDir inisections="isis common" initag="ca_dir"/>
                </infosys:Registrar>
            </infosys:InfoRegister>
        </loader:Service>
    </loader:Chain>
</ArcConfig>








